if (self.CavalryLogger) { CavalryLogger.start_js(["eIoQe"]); }

__d("InstagramSlipstreamMediaContentType",[],(function(a,b,c,d,e,f){e.exports={MEDIA_CONTENT_TYPE_PHOTO:0,MEDIA_CONTENT_TYPE_VIDEO:1,MEDIA_CONTENT_TYPE_RESHARE_PHOTO:2,MEDIA_CONTENT_TYPE_RESHARE_VIDEO:3,MEDIA_CONTENT_TYPE_BROADCAST:4,MEDIA_CONTENT_TYPE_SIDECAR:8,MEDIA_CONTENT_TYPE_RESHARE_STORY_PHOTO:9,MEDIA_CONTENT_TYPE_RESHARE_STORY_VIDEO:10,MEDIA_CONTENT_TYPE_RESHARE_IGTV_VIDEO:11,MEDIA_CONTENT_TYPE_UNKNOWN:255}}),null);
__d("MessengerSecondarySearchFunnelLogger",["FunnelLogger","MercuryConfig","MessengerSecondarySearchFunnelConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerSecondarySearchFunnelConstants").FUNNEL_NAME,h=b("MessengerSecondarySearchFunnelConstants").ENTRY_SURFACES,i=b("MessengerSecondarySearchFunnelConstants").EVENTS,j=b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES,k=b("MessengerSecondarySearchFunnelConstants").MICRO_SESSION_TYPES,l=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS,m=new Map(),n=new Map(),o=new Map(),p=new Map(),q=0;function a(a,c,d,e,f){if(!f)return;b("FunnelLogger").startFunnel(g,f);b("FunnelLogger").setFunnelTimeout(g,86400);o.set(f.toString(),c);b("FunnelLogger").appendActionWithPayloadIfNew(g,f,i.START,{search_surface:c,entry_surface:d,thread_fbid:e,client:a});(b("MercuryConfig").ChatComposer||c!==j.OMNIPICKER)&&v(f)}function c(a,c,d,e,f){if(!d)return;var h=n.get(d.toString()),j=m.get(d.toString());j=j?k.QUERY:k.NO_QUERY;h!==null&&(w(d,j),o["delete"](d.toString()));b("FunnelLogger").appendActionWithPayloadIfNew(g,d,i.END,{end_reason:a,action_name:c,thread_fbid:e,is_new_thread:f});b("FunnelLogger").endFunnel(g,d)}function d(a,c){if(!c)return;var d=c.toString(),e=m.get(d),f=o.get(d);!e&&!!a?((b("MercuryConfig").ChatComposer||f===j.BROADCAST||f===j.GROUP_CREATION||f===h.COMPOSER)&&w(c,k.NO_QUERY),v(c)):e&&a===""&&e!==""&&(w(c,k.QUERY),(b("MercuryConfig").ChatComposer||f===j.BROADCAST||f===j.GROUP_CREATION||f===h.COMPOSER)&&v(c));m.set(d,a);b("FunnelLogger").appendActionWithPayload(g,c,i.QUERY_CHANGED,{query_string:a})}function f(a,c,d,e,f,h,l,q){if(!l)return;var r=l.toString(),s=o.get(r),t=n.get(r);p.set(t,!0);b("FunnelLogger").appendActionWithPayload(g,l,i.RESULT_SELECTED,{query_string:e,result_fbid:a,result_type:d,result_index:c,data_source:[f],search_surface:h,micro_session_id:t,selection_type:q});s===j.OMNIPICKER?(w(l,k.QUERY),b("MercuryConfig").ChatComposer?(m.set(r,""),v(l)):m["delete"](r)):e&&s===j.GROUP_CREATION&&(m.set(r,""),w(l,k.QUERY),v(l))}function r(a,c,d){if(!d)return;b("FunnelLogger").appendActionWithPayload(g,d,i.SOURCE_STARTED,{query_string:a,data_source:[c]})}function s(a,c,d,e,f,h){if(!h)return;b("FunnelLogger").appendActionWithPayload(g,h,i.SOURCE_ENDED,{query_string:a,results_count:c,data_source:[d],status:e,result_used:f})}function t(a,c,d,e){if(!e)return;if(c.length===0)return;b("FunnelLogger").appendActionWithPayload(g,e,i.IMPRESSIONS,{query_string:a,impression_list:c})}function u(a,c,d){if(!d)return;b("FunnelLogger").appendActionWithPayload(g,d,i.TOKEN_REMOVED,{deleted_result_id:a,cleared_all_tokens:c})}function v(a){b("FunnelLogger").appendActionWithPayload(g,a,i.MICRO_SESSION_STARTED,{micro_session_id:q}),n.set(a.toString(),q),p.set(q,!1),q+=1}function w(a,c){var d=n.get(a.toString());b("FunnelLogger").appendActionWithPayload(g,a,i.MICRO_SESSION_ENDED,{micro_session_id:d,micro_session_end_reason:p.get(d)?l.RESULT_SELECTED:l.ABANDON,micro_session_type:c});p["delete"](d);n["delete"](a.toString())}function x(a){b("FunnelLogger").appendAction(g,a,i.REENTER_OMNIPICKER)}function y(a){b("FunnelLogger").appendAction(g,a,i.CLICK_OTHER_THREAD)}e.exports={endFunnel:c,impressions:t,queryChanged:d,reenterSearch:x,resultSelected:f,sourceEnded:s,sourceStarted:r,startFunnel:a,tokenRemoved:u,unfocusSearch:y}}),null);